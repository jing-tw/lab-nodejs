<html>
  <head>
    <script src="/socket.io/socket.io.js"></script>
  </head>
  <body>
    <link rel="shortcut icon" href="">
    <button onclick="myFunction()">play stream</button>

    <script>
        function myFunction() {
            // alert('Button was clicked!');


            var socket = io.connect();
            socket.on('message', function(data){
                console.log(data.message);
                });

                socket.on('data_wave', function(arrayBuffer){
                    console.log('data_wave');
                    var blob = new Blob([arrayBuffer], { 'type' : 'audio/wav' });
                    var audio = document.createElement('audio');
                    audio.src = window.URL.createObjectURL(blob);
                    //audio.muted = true;
                    audio.play();

                    // var playPromise = audio.play();

                    // // In browsers that don’t yet support this functionality,
                    // // playPromise won’t be defined.
                    // if (playPromise !== undefined) {
                    //     playPromise.then(function() {
                    //         // Automatic playback started!
                    //         console.log('Automatic playback started!');
                    //     }).catch(function(error) {
                    //         // Automatic playback failed.
                    //         // Show a UI element to let the user manually start playback.
                    //         console.log('Automatic playback failed.');
                    //     });
                    // }

                });
        }

    //   var socket = io.connect();
    //   socket.on('message', function(data){
    //     console.log(data.message);
    //     });

    //     socket.on('data_wave', function(arrayBuffer){
    //         console.log('data_wave');
    //         var blob = new Blob([arrayBuffer], { 'type' : 'audio/wav' });
    //         var audio = document.createElement('audio');
    //         audio.src = window.URL.createObjectURL(blob);
    //         //audio.muted = true;
    //         // audio.play();

    //         var playPromise = audio.play();

    //         // In browsers that don’t yet support this functionality,
    //         // playPromise won’t be defined.
    //         if (playPromise !== undefined) {
    //             playPromise.then(function() {
    //                 // Automatic playback started!
    //                 console.log('Automatic playback started!');
    //             }).catch(function(error) {
    //                 // Automatic playback failed.
    //                 // Show a UI element to let the user manually start playback.
    //                 console.log('Automatic playback failed.');
    //             });
    //         }

    //     });

        // setTimeout(function() {
        //     console.log('setTimeout');
        //     var playPromise = document.querySelector('audio').play();

        //     // In browsers that don’t yet support this functionality,
        //     // playPromise won’t be defined.
        //     if (playPromise !== undefined) {
        //         playPromise.then(function() {
        //             // Automatic playback started!
        //             console.log('Automatic playback started!');
        //         }).catch(function(error) {
        //             // Automatic playback failed.
        //             // Show a UI element to let the user manually start playback.
        //             console.log('Automatic playback failed.');
        //         });
        //     }
        // }, 3000);

        

        // // One-liner to resume playback when user interacted with the page.
        // document.querySelector('button').addEventListener('click', function() {
        //     context.resume().then(() => {
        //         console.log('Playback resumed successfully');
        //     });
        // });

    </script>
    <div>This is our socket.html file</div>
  </body>
</html>